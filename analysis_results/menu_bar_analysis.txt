================================================================================
DETAILED REPORT: openhcs/tui/menu_bar.py
================================================================================

SUMMARY:
  Classes: 8
  Functions: 0
  Methods: 71
  Total Definitions: 79

CLASSES:
  MissingStateError (Exception)
    def __init__()

  ReentrantLock
    def __init__()
    def __aenter__()
    def __aexit__()

  LayoutContract
    @staticmethod
    def validate_layout_container()

  MenuItemType (Enum)
    Attributes:
      COMMAND
      SUBMENU
      CHECKBOX
      SEPARATOR

  MenuItemSchema
    @staticmethod
    def validate_menu_item()
    Attributes:
      VALID_TYPES: ClassVar[FrozenSet[str]]

  MenuStructureSchema
    @staticmethod
    def validate_menu_structure()

  MenuItem
    def __init__()
    def is_enabled()
    def is_checked()
    def set_checked()
    @classmethod
    def from_dict()

  MenuBar (Container)
    def __init__()
    def _create_handler_map()
    def _create_condition_map()
    def _get_required_state()
    def _load_menu_structure()
    def _create_menu_labels()
    def create_mouse_handler()
    def menu_mouse_handler()
    def _create_submenu_float()
    def _create_key_bindings()
    def create_handler()
    def handler()
    @kb.add(...)
    def _()
    @kb.add(...)
    def _()
    @kb.add(...)
    def _()
    @kb.add(...)
    def _()
    @kb.add(...)
    def _()
    @kb.add(...)
    def _()
    def _activate_menu()
    def _close_menu()
    def _navigate_menu()
    def _navigate_submenu()
    def _select_current_item()
    def _create_submenu_container()
    def create_mouse_handler()
    def item_mouse_handler()
    def _handle_menu_item()
    def _on_new_pipeline()
    def _on_open_pipeline()
    def _on_save_pipeline()
    def _on_save_pipeline_as()
    def _on_exit()
    def _on_add_step()
    def _on_edit_step()
    def _on_remove_step()
    def _on_move_step_up()
    def _on_move_step_down()
    def _on_toggle_log_drawer()
    def _on_toggle_vim_mode()
    def _on_set_theme()
    def _on_pre_compile()
    def _on_compile()
    def _on_run()
    def _on_test()
    def _on_settings()
    def _on_documentation()
    def _on_keyboard_shortcuts()
    def _on_about()
    def _on_operation_status_changed()
    def _on_plate_selected()
    def _on_is_compiled_changed()
    def shutdown()
    def __pt_container__()
    def get_children()
    def preferred_width()
    def preferred_height()
    def reset()
    def write_to_screen()
    def mouse_handler()

IMPORTS:
  from asyncio import asyncio, Lock
  from dataclasses import dataclass, field
  from enum import Enum, auto
  from pathlib import Path
  from typing import Any, Callable, ClassVar, Dict, FrozenSet, List, Optional, Tuple, Union, TYPE_CHECKING
  from logging import logging
  from json import json, json
  from openhcs.core.steps.abstract import AbstractStep
  from openhcs.core.context.processing_context import ProcessingContext
  from openhcs.core.orchestrator.orchestrator import PipelineOrchestrator
  from prompt_toolkit.application import get_app
  from prompt_toolkit.filters import Condition, has_focus
  from prompt_toolkit.formatted_text import HTML
  from prompt_toolkit.key_binding import KeyBindings, KeyPressEvent
  from prompt_toolkit.layout import Container, FormattedTextControl, HSplit, VSplit, Window
  from prompt_toolkit.layout.containers import AnyContainer, ConditionalContainer, Float
  from prompt_toolkit.mouse_events import MouseEventType
  from prompt_toolkit.widgets import Box, Frame, Label
